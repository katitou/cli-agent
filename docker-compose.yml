services:
  code-agent:
    build: .
    environment:
      - USER_ACCESS_TOKEN=${USER_ACCESS_TOKEN}
      - TARGET_REPO=${TARGET_REPO}
      - BASE_BRANCH=${BASE_BRANCH:-main}
      - AGENT_LABEL=${AGENT_LABEL:-agent}
      - LLM_PROVIDER=${LLM_PROVIDER:-}
      - LLM_API_KEY=${LLM_API_KEY:-}
      - LLM_MODEL=${LLM_MODEL:-}
      - MAX_ITERATIONS=${MAX_ITERATIONS:-3}
      - POLL_INTERVAL_SECONDS=${POLL_INTERVAL_SECONDS:-300}
    restart: unless-stopped
